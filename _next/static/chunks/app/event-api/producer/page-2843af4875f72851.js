(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4919],{12486:(e,n,a)=>{"use strict";a.d(n,{A:()=>t});let t=(0,a(19946).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},17965:(e,n,a)=>{"use strict";a.d(n,{default:()=>x});var t=a(95155),s=a(88482),r=a(88145),l=a(34964),i=a(381),c=a(54213),_=a(12486),d=a(29621),o=a(58497),v=a(38391);let u={handler:[{name:"ax_event_handler_new",description:"Creates a new event handler instance",syntax:"AXEventHandler* ax_event_handler_new(void)",example:'// Create the main event handler\nAXEventHandler *event_handler = ax_event_handler_new();\nif (!event_handler) {\n    LOG_ERROR("Failed to create event handler\\n");\n    return -1;\n}',returns:"AXEventHandler* - New event handler instance"},{name:"ax_event_handler_declare",description:"Declares an event type with the system",syntax:"gboolean ax_event_handler_declare(AXEventHandler* event_handler, AXEventKeyValueSet* key_value_set, gint stateless, guint* declaration, AXDeclarationCompleteCallback callback, gpointer user_data, GError** error)",example:'// Declare the event (1 = stateless, 0 = stateful)\nif (!ax_event_handler_declare(event_handler, key_value_set, 1, \n                              &declaration, declaration_complete, \n                              &start_value, NULL)) {\n    LOG_ERROR("Could not declare event: %s\\n", error->message);\n    g_error_free(error);\n}',returns:"gboolean - TRUE on success, FALSE on failure"},{name:"ax_event_handler_send_event",description:"Sends an event through the declared event handler",syntax:"gboolean ax_event_handler_send_event(AXEventHandler* event_handler, guint declaration, AXEvent* event, GError** error)",example:'// Send the event\nif (!ax_event_handler_send_event(send_data->event_handler, \n                                 send_data->event_id, event, NULL)) {\n    LOG_ERROR("Could not fire event\\n");\n}',returns:"gboolean - TRUE on success, FALSE on failure"},{name:"ax_event_handler_undeclare",description:"Removes an event declaration from the system",syntax:"gboolean ax_event_handler_undeclare(AXEventHandler* event_handler, guint declaration, GError** error)",example:"// Cleanup: undeclare the event\nax_event_handler_undeclare(app_data->event_handler, \n                          app_data->event_id, NULL);",returns:"gboolean - TRUE on success, FALSE on failure"},{name:"ax_event_handler_free",description:"Frees the event handler and all resources",syntax:"void ax_event_handler_free(AXEventHandler* event_handler)",example:"// Final cleanup\nax_event_handler_free(app_data->event_handler);\napp_data->event_handler = NULL;",returns:"void"}],keyvalue:[{name:"ax_event_key_value_set_new",description:"Creates a new key-value set for event metadata",syntax:"AXEventKeyValueSet* ax_event_key_value_set_new(void)",example:"// Create container for event structure\nAXEventKeyValueSet *key_value_set = ax_event_key_value_set_new();",returns:"AXEventKeyValueSet* - New key-value set instance"},{name:"ax_event_key_value_set_add_key_value",description:"Adds a key-value pair to the set",syntax:"gboolean ax_event_key_value_set_add_key_value(AXEventKeyValueSet* key_value_set, const gchar* key, const gchar* namespace, gpointer value, AXValueType value_type, GError** error)",example:'// Add topic levels\nax_event_key_value_set_add_key_value(key_value_set,\n    "topic0", "tnsaxis", TOPIC0_TAG, AX_VALUE_TYPE_STRING, NULL);\n    \n// Add event data\nax_event_key_value_set_add_key_value(key_value_set,\n    "value", NULL, &start_value, AX_VALUE_TYPE_INT, NULL);',returns:"gboolean - TRUE on success, FALSE on failure"},{name:"ax_event_key_value_set_add_nice_names",description:"Adds human-readable names for topics (appears in camera web UI)",syntax:"gboolean ax_event_key_value_set_add_nice_names(AXEventKeyValueSet* key_value_set, const gchar* key, const gchar* namespace, const gchar* value, const gchar* nice_name, GError** error)",example:'// Add nice names for web UI display\nax_event_key_value_set_add_nice_names(key_value_set,\n    "topic1", "tnsaxis", TOPIC1_TAG, TOPIC1_NAME, NULL);\nax_event_key_value_set_add_nice_names(key_value_set,\n    "topic2", "tnsaxis", EVENT_TAG, EVENT_NAME, NULL);',returns:"gboolean - TRUE on success, FALSE on failure"},{name:"ax_event_key_value_set_mark_as_data",description:"Marks a key-value pair as event data (not metadata)",syntax:"gboolean ax_event_key_value_set_mark_as_data(AXEventKeyValueSet* key_value_set, const gchar* key, const gchar* namespace, GError** error)",example:'// Mark value as actual event data\nax_event_key_value_set_mark_as_data(key_value_set, \n                                   "value", NULL, NULL);',returns:"gboolean - TRUE on success, FALSE on failure"},{name:"ax_event_key_value_set_free",description:"Frees the key-value set and its resources",syntax:"void ax_event_key_value_set_free(AXEventKeyValueSet* key_value_set)",example:"// Cleanup after declaration\nax_event_key_value_set_free(key_value_set);",returns:"void"}],event:[{name:"ax_event_new2",description:"Creates a new event object (ax_event_new is deprecated from 3.2)",syntax:"AXEvent* ax_event_new2(AXEventKeyValueSet* key_value_set, GError** error)",example:'// Create event with current data\nAXEventKeyValueSet *kvs = ax_event_key_value_set_new();\nax_event_key_value_set_add_key_value(kvs, "value", NULL, \n                                    &send_data->value, \n                                    AX_VALUE_TYPE_INT, NULL);\n\nAXEvent *event = ax_event_new2(kvs, NULL);\nax_event_key_value_set_free(kvs);',returns:"AXEvent* - New event instance or NULL on failure"},{name:"ax_event_free",description:"Frees the event object and its resources",syntax:"void ax_event_free(AXEvent* event)",example:"// Always free events after sending\nax_event_free(event);\nevent = NULL;",returns:"void"}]},p={handler:(0,t.jsx)(i.A,{className:"w-5 h-5"}),keyvalue:(0,t.jsx)(c.A,{className:"w-5 h-5"}),event:(0,t.jsx)(_.A,{className:"w-5 h-5"})};function x(){return(0,t.jsxs)("div",{className:"w-full max-w-6xl mx-auto p-4 sm:p-6 bg-white",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"ACAP SDK Event API Functions"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Complete function reference based on actual sample code"})]}),(0,t.jsxs)(l.Tabs,{defaultValue:"handler",className:"w-full",children:[(0,t.jsxs)(l.TabsList,{className:"grid w-full grid-cols-1 sm:grid-cols-3 gap-2",children:[(0,t.jsxs)(l.TabsTrigger,{value:"handler",className:"flex items-center justify-center gap-2",children:[p.handler,"Event Handler"]}),(0,t.jsxs)(l.TabsTrigger,{value:"keyvalue",className:"flex items-center justify-center gap-2",children:[p.keyvalue,"Key-Value Sets"]}),(0,t.jsxs)(l.TabsTrigger,{value:"event",className:"flex items-center justify-center gap-2",children:[p.event,"Event Objects"]})]}),Object.entries(u).map(e=>{let[n,a]=e;return(0,t.jsx)(l.TabsContent,{value:n,className:"mt-6",children:(0,t.jsx)("div",{className:"space-y-6",children:a.map((e,n)=>(0,t.jsxs)(s.Zp,{className:"border-l-4 border-blue-500 shadow-sm overflow-hidden",children:[(0,t.jsxs)(s.aR,{children:[(0,t.jsxs)(s.ZB,{className:"flex items-center gap-3 text-xl font-semibold",children:[(0,t.jsx)(d.A,{className:"w-6 h-6 text-blue-500"}),(0,t.jsx)("code",{className:"text-gray-800",children:e.name})]}),(0,t.jsx)(s.BT,{className:"pt-1",children:e.description})]}),(0,t.jsxs)(s.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(r.E,{variant:"outline",className:"mb-2 font-semibold",children:"Function Signature"}),(0,t.jsx)(o.A,{language:"c",style:v.A,customStyle:{padding:"1rem",borderRadius:"0.5rem",margin:"0"},wrapLongLines:!0,children:e.syntax})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(r.E,{variant:"outline",className:"mb-2 font-semibold",children:"Example Usage"}),(0,t.jsx)(o.A,{language:"c",style:v.A,customStyle:{padding:"1rem",borderRadius:"0.5rem",margin:"0"},wrapLongLines:!0,children:e.example})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(r.E,{variant:"secondary",className:"mb-2 font-semibold",children:"Returns"}),(0,t.jsx)("p",{className:"text-sm text-gray-700 bg-gray-100 p-3 rounded-md font-mono",children:e.returns})]})]})]},n))})},n)})]})]})}},22827:(e,n,a)=>{Promise.resolve().then(a.bind(a,17965)),Promise.resolve().then(a.bind(a,76600)),Promise.resolve().then(a.bind(a,45857)),Promise.resolve().then(a.bind(a,74884)),Promise.resolve().then(a.t.bind(a,6874,23))},40646:(e,n,a)=>{"use strict";a.d(n,{A:()=>t});let t=(0,a(19946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},45857:(e,n,a)=>{"use strict";a.d(n,{default:()=>_});var t=a(95155),s=a(88482),r=a(381),l=a(58497),i=a(38391);let c=[{step:1,title:"Create Event Handler",code:"app_data->event_handler = ax_event_handler_new();",description:"Initialize the main event handler instance"},{step:2,title:"Create Key-Value Set",code:"key_value_set = ax_event_key_value_set_new();",description:"Create container for event metadata and structure"},{step:3,title:"Define Topic Hierarchy",code:'// TOPIC LEVEL 0 (CameraApplicationPlatform)\nax_event_key_value_set_add_key_value(key_value_set,\n    "topic0", "tnsaxis", TOPIC0_TAG, AX_VALUE_TYPE_STRING, NULL);\n\n// TOPIC LEVEL 1 (SendPulse)  \nax_event_key_value_set_add_key_value(key_value_set,\n    "topic1", "tnsaxis", TOPIC1_TAG, AX_VALUE_TYPE_STRING, NULL);\nax_event_key_value_set_add_nice_names(key_value_set,\n    "topic1", "tnsaxis", TOPIC1_TAG, TOPIC1_NAME, NULL);\n\n// TOPIC LEVEL 2 (SendPulseEvent)\nax_event_key_value_set_add_key_value(key_value_set,\n    "topic2", "tnsaxis", EVENT_TAG, AX_VALUE_TYPE_STRING, NULL);',description:"Build the three-level topic hierarchy for event organization"},{step:4,title:"Add Event Data",code:'ax_event_key_value_set_add_key_value(key_value_set,\n    "value", NULL, &start_value, AX_VALUE_TYPE_INT, NULL);\nax_event_key_value_set_mark_as_data(key_value_set, \n    "value", NULL, NULL);',description:"Define the actual data payload that will be sent with events"},{step:5,title:"Declare Event",code:"ax_event_handler_declare(event_handler, key_value_set, 1, \n    &declaration, declaration_complete, &start_value, NULL);",description:"Register the event with the system (1 = stateless, 0 = stateful)"},{step:6,title:"Setup Timer & Send Events",code:"// In declaration_complete callback:\napp_data->timer = g_timeout_add_seconds(5, \n    (GSourceFunc)send_event, app_data);",description:"Start periodic event sending after declaration is complete"}];function _(){return(0,t.jsxs)("div",{className:"w-full max-w-6xl mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"ACAP Event Declaration Flow"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Step-by-step process for declaring and sending events in ACAP SDK"})]}),(0,t.jsx)("div",{className:"space-y-4",children:c.map((e,n)=>(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold",children:e.step}),n<c.length-1&&(0,t.jsx)("div",{className:"w-0.5 h-16 bg-gray-300 mt-2"})]}),(0,t.jsxs)(s.Zp,{className:"flex-1 border-l-4 border-l-blue-500",children:[(0,t.jsxs)(s.aR,{children:[(0,t.jsx)(s.ZB,{className:"text-lg",children:e.title}),(0,t.jsx)(s.BT,{children:e.description})]}),(0,t.jsx)(s.Wu,{children:(0,t.jsx)(l.A,{language:"c",style:i.A,customStyle:{padding:"1rem",borderRadius:"0.5rem",fontSize:"0.875rem"},wrapLongLines:!0,children:e.code})})]})]},n))}),(0,t.jsxs)(s.Zp,{className:"bg-amber-50 border-amber-200",children:[(0,t.jsx)(s.aR,{children:(0,t.jsxs)(s.ZB,{className:"flex items-center gap-3 text-amber-800",children:[(0,t.jsx)(r.A,{className:"w-5 h-5"}),"Key Concepts"]})}),(0,t.jsx)(s.Wu,{className:"text-amber-800",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Event States:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Stateless (1):"})," Fire-and-forget events"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Stateful (0):"})," Events with persistent state"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Topic Hierarchy:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"topic0:"})," Platform level (CameraApplicationPlatform)"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"topic1:"})," Application level (SendPulse)"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"topic2:"})," Event level (SendPulseEvent)"]})]})]})]})})]})]})}},76600:(e,n,a)=>{"use strict";a.d(n,{default:()=>v});var t=a(95155),s=a(88482),r=a(88145),l=a(40646),i=a(29621),c=a(85339),_=a(58497),d=a(38391);let o=[{title:"Basic Application Event Callback",description:"Simple callback for handling application lifecycle events",code:'// Callback function signature\nstatic void on_application_event(guint subscription, AXEvent *event, gpointer user_data) {\n    // Get the event type from the key-value set\n    const gchar *event_key = ax_event_get_key_value_set(event);\n    \n    // Extract specific data from the event\n    const gchar *app_name = ax_event_key_value_get(event, "application");\n    const gchar *timestamp = ax_event_key_value_get(event, "timestamp");\n    \n    g_print("Application Event: %s\\n", event_key);\n    g_print("Application: %s\\n", app_name ? app_name : "Unknown");\n    g_print("Timestamp: %s\\n", timestamp ? timestamp : "Not provided");\n}\n\n// Register the callback\nAXEventHandler *handler = ax_event_handler_create(\n    "tnsaxis:CameraApplicationPlatform/Application/Started",\n    on_application_event,\n    NULL,  // user_data\n    &error\n);',type:"basic"},{title:"Advanced Callback with User Data",description:"Callback that uses user data to maintain application state",code:'// Application context structure\ntypedef struct {\n    gchar *app_name;\n    gint event_count;\n    GMutex mutex;\n} AppContext;\n\n// Thread-safe callback with user data\nstatic void on_app_status_event(guint subscription, AXEvent *event, gpointer user_data) {\n    AppContext *ctx = (AppContext *)user_data;\n    \n    // Lock for thread safety\n    g_mutex_lock(&ctx->mutex);\n    \n    const gchar *status = ax_event_key_value_get(event, "status");\n    const gchar *message = ax_event_key_value_get(event, "message");\n    \n    ctx->event_count++;\n    \n    g_print("[%s] Event #%d - Status: %s\\n", \n            ctx->app_name, ctx->event_count, status);\n    \n    if (message) {\n        g_print("Message: %s\\n", message);\n    }\n    \n    g_mutex_unlock(&ctx->mutex);\n}\n\n// Setup with user data\nAppContext *app_ctx = g_new0(AppContext, 1);\napp_ctx->app_name = g_strdup("MyACAPApp");\napp_ctx->event_count = 0;\ng_mutex_init(&app_ctx->mutex);\n\nAXEventHandler *handler = ax_event_handler_create(\n    "tnsaxis:CameraApplicationPlatform/MyApp/StatusUpdate",\n    on_app_status_event,\n    app_ctx,  // Pass context as user_data\n    &error\n);',type:"advanced"},{title:"Error Handling Callback",description:"Robust callback with comprehensive error handling",code:'// Error-aware callback function\nstatic void on_license_event(guint subscription, AXEvent *event, gpointer user_data) {\n    if (!event) {\n        g_warning("Received NULL event in callback");\n        return;\n    }\n    \n    const gchar *event_key = ax_event_get_key_value_set(event);\n    if (!event_key) {\n        g_warning("Event has no key-value set");\n        return;\n    }\n    \n    // Check if this is a license event\n    if (!g_str_has_prefix(event_key, "tnsaxis:CameraApplicationPlatform/License/")) {\n        g_warning("Unexpected event type: %s", event_key);\n        return;\n    }\n    \n    const gchar *license_status = ax_event_key_value_get(event, "status");\n    const gchar *app_id = ax_event_key_value_get(event, "application_id");\n    const gchar *error_msg = ax_event_key_value_get(event, "error_message");\n    \n    if (g_str_has_suffix(event_key, "/Invalid") || g_str_has_suffix(event_key, "/Expired")) {\n        g_critical("License issue for app %s: %s", \n                  app_id ? app_id : "unknown",\n                  error_msg ? error_msg : "No details provided");\n        \n        // Handle license failure\n        handle_license_failure(app_id, error_msg);\n    } else if (g_str_has_suffix(event_key, "/Valid")) {\n        g_info("License validated successfully for app: %s", \n               app_id ? app_id : "unknown");\n    }\n}\n\n// Helper function for license failure handling\nstatic void handle_license_failure(const gchar *app_id, const gchar *error_msg) {\n    // Log the failure\n    g_warning("Application %s license failure: %s", app_id, error_msg);\n    \n    // Could trigger application shutdown, send notification, etc.\n    // Implementation depends on your application\'s requirements\n}',type:"error-handling"}];function v(){return(0,t.jsxs)("div",{className:"w-full max-w-6xl mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Event API Callback Examples"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Practical examples of implementing event callbacks in ACAP applications"})]}),(0,t.jsx)("div",{className:"space-y-6",children:o.map((e,n)=>(0,t.jsxs)(s.Zp,{className:"border-l-4 border-l-indigo-500",children:[(0,t.jsxs)(s.aR,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(s.ZB,{className:"flex items-center gap-3",children:[(0,t.jsx)(i.A,{className:"w-5 h-5"}),e.title]}),(0,t.jsxs)(r.E,{className:(e=>{switch(e){case"basic":return"bg-green-100 text-green-800 border-green-300";case"advanced":return"bg-blue-100 text-blue-800 border-blue-300";case"error-handling":return"bg-orange-100 text-orange-800 border-orange-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}})(e.type),children:[(e=>{switch(e){case"basic":return(0,t.jsx)(l.A,{className:"w-4 h-4"});case"advanced":default:return(0,t.jsx)(i.A,{className:"w-4 h-4"});case"error-handling":return(0,t.jsx)(c.A,{className:"w-4 h-4"})}})(e.type),(0,t.jsx)("span",{className:"ml-1 capitalize",children:e.type.replace("-"," ")})]})]}),(0,t.jsx)(s.BT,{children:e.description})]}),(0,t.jsx)(s.Wu,{children:(0,t.jsx)(_.A,{language:"c",style:d.A,customStyle:{padding:"1rem",borderRadius:"0.5rem",fontSize:"0.875rem"},wrapLongLines:!0,children:e.code})})]},n))}),(0,t.jsxs)(s.Zp,{className:"bg-blue-50 border-blue-200",children:[(0,t.jsx)(s.aR,{children:(0,t.jsxs)(s.ZB,{className:"flex items-center gap-3 text-blue-800",children:[(0,t.jsx)(c.A,{className:"w-5 h-5"}),"Callback Best Practices"]})}),(0,t.jsx)(s.Wu,{className:"text-blue-800",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Do:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsx)("li",{children:"• Always validate event and user_data parameters"}),(0,t.jsx)("li",{children:"• Use thread-safe operations (mutexes, atomic operations)"}),(0,t.jsx)("li",{children:"• Keep callback functions lightweight and fast"}),(0,t.jsx)("li",{children:"• Free any allocated memory in callbacks"}),(0,t.jsx)("li",{children:"• Log important events for debugging"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Don't:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsx)("li",{children:"• Block or perform long-running operations"}),(0,t.jsx)("li",{children:"• Call ax_event_handler_free() from within callback"}),(0,t.jsx)("li",{children:"• Assume event data will persist after callback returns"}),(0,t.jsx)("li",{children:"• Ignore error conditions or NULL pointers"}),(0,t.jsx)("li",{children:"• Access shared data without proper synchronization"})]})]})]})})]})]})}},85339:(e,n,a)=>{"use strict";a.d(n,{A:()=>t});let t=(0,a(19946).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},e=>{var n=n=>e(e.s=n);e.O(0,[6874,172,7506,8344,8441,1684,7358],()=>n(22827)),_N_E=e.O()}]);